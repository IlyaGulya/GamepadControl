version: 1
shell: /bin/zsh

groups:
  browser:
    - company.thebrowser.Browser  # Arc
    - app.zen-browser.zen         # Zen
  terminal:
    - com.github.wez.wezterm      # WezTerm

rules:
  common:
    buttons:
      # === Face buttons ===
      a:
        click: left
      x:
        click: right
      y:
        click: double
      b:
        keystroke: escape
      start:
        tap: enter
      back:
        tap: cmd+w

      # === D-pad ===
      dpad_up:
        keystroke: arrow_up
      dpad_down:
        keystroke: arrow_down
      dpad_left:
        keystroke: arrow_left
      dpad_right:
        keystroke: arrow_right

      # === Bumpers — voice input (raw modifier for FlagsChanged events) ===
      lb:
        rawkey: rcmd
      rb:
        rawkey: ralt

      # === Navigation layer (LT + button) ===
      lt+a:
        shell: aerospace focus dfs-next
      lt+b:
        shell: aerospace focus dfs-prev
      lt+dpad_left:
        tap: cmd+shift+[
      lt+dpad_right:
        tap: cmd+shift+]
      lt+dpad_up:
        tap: cmd+k
      lt+dpad_down:
        tap: cmd+l
      lt+start:
        tap: cmd+t
      lt+back:
        tap: cmd+q
      lt+x:
        tap: cmd+f
      lt+y:
        tap: cmd+space

      # === Window layer (RT + button, AeroSpace CLI) ===
      rt+dpad_left:
        shell: aerospace focus left
      rt+dpad_right:
        shell: aerospace focus right
      rt+dpad_up:
        shell: aerospace focus up
      rt+dpad_down:
        shell: aerospace focus down
      rt+a:
        shell: aerospace move left
      rt+b:
        shell: aerospace move right
      rt+x:
        shell: aerospace fullscreen
      rt+y:
        shell: aerospace layout tiles horizontal vertical

      # === RT + start — workspace switcher ===
      rt+start:
        shell: aerospace workspace 1

    sticks:
      left:
        mode: mouse_move
        deadzone: 0.15
        max_speed_px_s: 1600
        gamma: 1.5
      right:
        mode: scroll
        deadzone: 0.15
        speed_lines_s: 80
